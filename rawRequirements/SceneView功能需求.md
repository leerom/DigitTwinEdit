# 三维场景编辑器（Scene View）功能需求描述

本文基于指定界面布局及操作指南，明确三维场景编辑器Scene View（场景视图）的核心功能、按钮交互、键盘快捷键及鼠标操作逻辑，适配3D场景搭建与编辑场景，兼顾操作便捷性与设备兼容性，确保功能、布局与操作流程高度统一，直观易懂。

三维编辑场景视图（Scene View）内部功能按钮布局如下：

```plain text
┌────────────────────────────────────────────────────────────────────────────────────┐
|                                                                                    |
│                            ┌────────────┬─────────────┬─────────────────────┐      │
│                            │ 线框模式    │ 标准模式    │ 线框+标准模式         │      │
│                            └────────────┴─────────────┴─────────────────────┘      │
| ┌───────────┐                                                                      |
| │  ▶[Q]◀   │                                                                      |
| │  抓手工具 │                                                                      |
| │  [ACTIVE] │                                                                      |
| ├───────────┤                                                                      |
| │  [W]      │                                                                      |
| │  移动工具 │                                                                      |
| ├───────────┤                                                                      |
| │  [E]      │                                                                      |
| │  旋转工具 │                                                                      |
| ├───────────┤                                                                      |
| │  [R]      │                                                                      |
| │  缩放工具 │                                                                      |
| ├───────────┤                                                                      |
| │  [Y]      │                                                                      |
| │  综合变换 │                                                                      |
| └───────────┘                                                                      |
│                                                                    ^ Y             │
│                                                                   /                │
│                                                                  /                 │
│                                                                 *───> X            │
│                                                                 \                  │
│                                                                  \                 │
│                                                                   v Z              │
└────────────────────────────────────────────────────────────────────────────────────┘
```

注：布局中渲染模式工具栏位于视图右上角，核心编辑工具栏位于左侧，三维坐标系辅助工具位于右下角，各元素布局互不遮挡，适配后续功能描述。

## 一、整体视图基础需求

1.  场景视图为独立可交互窗口，支持拖拽调整窗口大小，窗口内显示场景网格、游戏物体及各类辅助元素（如三维坐标系、工具控件），默认提供3D透视视角，同时支持2D正交视角切换适配不同开发场景。

2.  视图全面支持鼠标、键盘快捷键组合操作，覆盖视图导航、对象编辑、模式切换等核心场景，操作逻辑连贯，无冗余步骤，适配主流设备操作习惯，提升编辑效率。

3.  窗口内元素层级清晰，渲染模式工具栏、核心编辑工具栏、三维坐标系辅助工具互不遮挡，布局自适应不同屏幕尺寸，确保各类操作按钮易点击、不误触。

4.  支持跨系统适配，Windows与Mac系统快捷键对应替换，操作逻辑保持一致，无系统差异化体验。

## 二、右上角渲染模式工具栏功能需求

工具栏包含三个互斥渲染模式选项，点击对应选项切换场景渲染效果，同一时间仅能激活一种模式，激活状态需有明显视觉标识（如高亮、边框加粗），渲染模式切换不影响编辑工具功能及操作逻辑，仅改变场景视觉展示效果。

- **线框模式**：激活后，场景内所有游戏物体仅渲染线框结构，不显示材质、纹理及光影效果，便于查看物体拓扑结构、碰撞体范围及内部布局，适配模型结构检查场景。

- **标准模式**：默认激活模式，场景内物体渲染完整效果，包括材质、纹理、光影、透明度等，还原物体最终显示状态，适配日常场景搭建、物体摆放及效果调试。

- **线框+标准模式**：融合前两种模式效果，物体在显示完整材质光影的同时，叠加线框结构，既保证视觉效果预览，又能查看物体结构，适配精细模型调整、物体对齐等场景。

## 三、左侧核心编辑工具栏功能需求

工具栏为垂直布局，包含5类核心编辑工具，支持鼠标点击激活及对应快捷键唤醒（Q/W/E/R/Y），激活工具需有视觉高亮标识（如箭头标注、背景变色），当前默认激活工具为抓手工具（[ACTIVE]状态）。工具激活后，支持按对应快捷键快速切换，无需返回工具栏点击；未选中物体时，仅抓手工具可正常使用，其余工具仅显示图标，无法触发物体编辑操作。

- **Q：抓手工具**：仅用于视图导航，不影响场景内物体属性。激活后，鼠标切换为“抓手”图标，左键拖动可平移场景视图，松开鼠标中键后恢复箭头图标；也可直接按住鼠标中键拖动实现视图平移，适配场景漫游、物体定位前的视图调整。

- **W：移动工具**：物体位置编辑工具。激活后，选中物体将显示XYZ轴彩色箭头（红X、绿Y、蓝Z），拖动对应箭头可沿该轴移动物体；支持吸附网格、吸附顶点等辅助功能，精准调整物体位置，按住Shift键可加速移动操作。

- **E：旋转工具**：物体角度编辑工具。激活后，选中物体将显示XYZ轴彩色圆环，拖动对应圆环可绕该轴旋转物体；支持角度数值输入，适配物体姿态校准、动画关键帧调整等场景，按住Shift键可加速旋转操作。

- **R：缩放工具**：物体尺寸编辑工具。激活后，选中物体将显示XYZ轴彩色立方体，拖动对应立方体可沿该轴单独缩放；拖动三轴交点可进行等比例缩放，保持物体原有比例不变，按住Shift键可加速缩放操作。

- **Y：综合变换工具**：集成移动、旋转、缩放功能。激活后，选中物体同时显示三种操作的XYZ轴控件，无需切换工具即可完成多维度调整，适配快速编辑、物体姿态微调等高效操作场景，按住Shift键可加速各类变换操作。

## 四、右下角三维坐标系辅助工具功能需求

坐标系工具为场景视角导航辅助元素，以三维轴（X/Y/Z）及中心点标识展示，支持点击交互，适配视角快速切换、复位及定位，与抓手工具、快捷键联动，核心功能如下：

- **轴向视角切换**：点击X/Y/Z轴标识，可快速切换至该轴的正视图/侧视图（如点击X轴切换至沿X轴看向场景的视角），便于从固定方向检查物体摆放、场景对齐情况，切换后可通过抓手工具微调视图位置。

- **视角复位**：Shift+单击坐标系中心点，可将混乱/不当视角（如颠倒、过近/过远）恢复为默认透视视角（侧上方观察场景的标准角度），快速回归初始编辑视角；单独点击中心点可实现视图居中对齐，适配快速校准视角需求。

- **坐标系标识**：清晰标注X（右向）、Y（上向）、Z（前向）轴向，与世界坐标系保持一致，为物体移动、旋转提供方向参考，避免操作偏差，同时配合视角导航操作，辅助精准定位。

## 五、核心操作功能需求（含鼠标/快捷键交互）

### 5.1 视图导航操作

此类操作仅调整场景视角，不改变场景内任何游戏物体属性，适配3D模式与2D模式（部分功能2D模式不可用），核心操作如下：

- **对象选择**：鼠标保持箭头状态，左键拖动绘制选择框，松开鼠标后选中选择框内所有3D对象；单个选中直接左键单击物体，支持加选（Ctrl+左键单击未选中物体）、减选（Alt+左键单击已选中物体）。

- **基础视角控制**：旋转视角通过Alt+左键拖动实现（仅3D模式可用，鼠标保持箭头状态）；缩放视角可滚动鼠标滚轮，或通过Alt+右键拖动调节，按住Shift键可加速缩放速度；按上下左右箭头键可沿当前视角平移视图，Shift+箭头键可提升平移速度。

- **飞越漫游模式**：3D模式专属功能，2D模式不可用。按住鼠标右键（鼠标切换为“眼睛”图标），通过WASD键实现前后左右移动，Q/E键实现上下移动，按住Shift键可提升漫游速度，拖动鼠标可同步调整漫游视角，松开右键后恢复箭头图标及默认状态。

- **视角聚焦与跟随**：选中物体后按F键，视图居中聚焦至该物体；按Shift+F键可锁定视角至物体，物体移动、旋转时视图同步跟随，始终保持物体在视野中心，便于精准编辑；按Ctrl+Alt+F键可移动物体至视图中心，Ctrl+Shift+F键可对齐物体与视图中心。

### 5.2 游戏物体编辑操作

此类操作针对选中的游戏物体，实现位置、角度、大小、数量及属性的调整，配合快捷键提升编辑效率，核心操作如下：

- **批量/快捷操作**：全选场景内物体按Ctrl+A，取消全选可通过点击视图空白区域实现；复制物体按Ctrl+D，粘贴物体按Ctrl+V；删除物体按Delete键（带确认提示），Shift+Delete键可无确认提示直接删除。

- **对象属性编辑**：选中物体后按F2键可快速重命名，也可在右侧检查器窗口顶部直接修改名称，便于场景物体分类管理；按Ctrl+Shift+Z键可重置物体变换属性，将位置归世界原点、旋转角度归零、缩放比例设为1，也支持通过检查器窗口Transform组件菜单手动重置。

### 5.3 模式适配与补充操作

- **模式差异化适配**：2D模式下，旋转视角、飞越漫游模式不可用，鼠标右键拖动将替代为视图平移功能，其余操作逻辑与3D模式保持一致。

- **跨系统快捷键适配**：Mac系统中，所有操作的Ctrl键替换为Command键，Alt键替换为Option键，操作效果与Windows系统完全一致，无功能差异。

- **操作联动优化**：无论当前激活何种物体编辑工具，均可直接使用Alt+鼠标组合、鼠标中键等方式进行视图调整，无需切换至抓手工具，减少操作步骤。

## 六、交互联动与视觉反馈需求

- 所有工具激活状态、渲染模式激活状态、鼠标状态切换（箭头/抓手/眼睛），需在窗口内实时视觉反馈，标识清晰可辨，避免用户误操作。

- 快捷键操作需支持即时响应，无延迟；操作冲突时（如同一快捷键对应多功能），优先执行当前模式下的核心功能，同时给出明确提示（可选）。

- 视图导航操作与物体编辑工具互不干扰，视角调整时不影响已激活的编辑工具状态，切换工具后可无缝继续之前的编辑操作。